<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.2/jquery.min.js"></script>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.2/css/bootstrap.min.css" integrity="sha384-y3tfxAZXuh4HwSYylfB+J125MxIs6mR5FOHamPBG064zB+AFeWH94NdvaCBm8qnd" crossorigin="anonymous">
  <!-- Compiled and minified CSS -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.98.2/css/materialize.min.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.98.2/js/materialize.min.js"></script>
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
  <script type="text/javascript">
  $(document).ready(function(){
    $(".dropdown-button").dropdown();
    $(".button-collapse").sideNav();
  });
  </script>
  <style type="text/css">
   .card-img-top {
    width: 100%;
    height: 15vw;
    object-fit: cover;
}  

.breadcrumb{
background-color: white;
border: none;
}

.card-deck{
  margin-top: 10px;
}

#rcorners1 {
    border-radius: 25px;
    background: #D3D3D3;
    padding: 10px; 
    width: 200px;
    height: 80px;    
}

<style>

/* DivTable.com */
.divTable{
  display: table;
  width: 100%;
}
.divTableRow {
  display: table-row;
}
.divTableHeading {
  background-color: #EEE;
  display: table-header-group;
}
.divTableCell, .divTableHead {
  display: table-cell;
  max-width:600px;
  padding: 3px 10px;
  padding-left: 0px !important;
}
.divTableHeading {
  background-color: #EEE;
  display: table-header-group;
  font-weight: bold;
}
.divTableFoot {
  background-color: #EEE;
  display: table-footer-group;
  font-weight: bold;
}
.divTableBody {
  display: table-row-group;
}

/* Prevent the text contents of draggable elements from being selectable. */
[draggable] {
  -moz-user-select: none;
  -khtml-user-select: none;
  -webkit-user-select: none;
  user-select: none;
  /* Required to make elements draggable in old WebKit */
  -khtml-user-drag: element;
  -webkit-user-drag: element;
}
.column {
  height: 120px;
  width: 200px;
  float: left;
  border: 2px solid #666666;
  margin-left: 35px;
  background-color: #fff;
  margin-right: 5px;
  -webkit-border-radius: 10px;
  -ms-border-radius: 10px;
  -moz-border-radius: 10px;
  border-radius: 10px;
  -webkit-box-shadow: inset 0 0 3px #000;
  -ms-box-shadow: inset 0 0 3px #000;
  box-shadow: inset 0 0 3px #000;
  text-align: center;
  cursor: move;
}
.column header {
  color: #000;
  text-shadow: #fff 0 1px;
  box-shadow: 5px;
  padding: 5px;
  background: -moz-linear-gradient(left center, rgb(255,255,255), rgb(255,255,255), rgb(255,255,255));
  background: -webkit-gradient(linear, left top, right top,
                               color-stop(0, rgb(255,255,255)),
                               color-stop(0.50, rgb(255,255,255)),
                               color-stop(1, rgb(255,255,255)));
  background: -webkit-linear-gradient(left center, rgb(255,255,255), rgb(255,255,255), rgb(255,255,255));
  background: -ms-linear-gradient(left center, rgb(255,255,255), rgb(255,255,255), rgb(255,255,255));
  border-bottom: 1px solid #ddd;
  -webkit-border-top-left-radius: 10px;
  -moz-border-radius-topleft: 10px;
  -ms-border-radius-topleft: 10px;
  border-top-left-radius: 10px;
  -webkit-border-top-right-radius: 10px;
  -ms-border-top-right-radius: 10px;
  -moz-border-radius-topright: 10px;
  border-top-right-radius: 10px;
}

.columnplayer {
  height: 100px;
  width: 100px;
  float: left;
  border: 2px solid #666666;
  margin-left: 35px;
  background-color: #fff;
  margin-right: 5px;
  -webkit-border-radius: 10px;
  -ms-border-radius: 10px;
  -moz-border-radius: 10px;
  border-radius: 10px;
  -webkit-box-shadow: inset 0 0 3px #000;
  -ms-box-shadow: inset 0 0 3px #000;
  box-shadow: inset 0 0 3px #000;
  text-align: center;
  cursor: move;
}
.columnplayer header {
  color: #000;
  text-shadow: #fff 0 1px;
  box-shadow: 5px;
  padding: 5px;
  background: -moz-linear-gradient(left center, rgb(255,255,255), rgb(255,255,255), rgb(255,255,255));
  background: -webkit-gradient(linear, left top, right top,
                               color-stop(0, rgb(255,255,255)),
                               color-stop(0.50, rgb(255,255,255)),
                               color-stop(1, rgb(255,255,255)));
  background: -webkit-linear-gradient(left center, rgb(255,255,255), rgb(255,255,255), rgb(255,255,255));
  background: -ms-linear-gradient(left center, rgb(255,255,255), rgb(255,255,255), rgb(255,255,255));
  border-bottom: 1px solid #ddd;
  -webkit-border-top-left-radius: 10px;
  -moz-border-radius-topleft: 10px;
  -ms-border-radius-topleft: 10px;
  border-top-left-radius: 10px;
  -webkit-border-top-right-radius: 10px;
  -ms-border-top-right-radius: 10px;
  -moz-border-radius-topright: 10px;
  border-top-right-radius: 10px;
}

/* draggable targets */
[data-draggable="target"]
{
    float:left;
    list-style-type:none;
    
    width:100%;
    height:10em;
    overflow-y:auto;
    
    margin:0 0.5em 0.5em 0;
    padding:0.5em;
    
    border-radius: 5px;
    
    background:transparent;
    color:#555;
}

</style>
<script>
(function()
{

    //exclude older browsers by the features we need them to support
    //and legacy opera explicitly so we don't waste time on a dead browser
    if
    (
        !document.querySelectorAll 
        || 
        !('draggable' in document.createElement('span')) 
        || 
        window.opera
    ) 
    { return; }
    
    //get the collection of draggable items and add their draggable attribute
    for(var 
        items = document.querySelectorAll('[data-draggable="item"]'), 
        len = items.length, 
        i = 0; i < len; i ++)
    {
        items[i].setAttribute('draggable', 'true');
    }

    //variable for storing the dragging item reference 
    //this will avoid the need to define any transfer data 
    //which means that the elements don't need to have IDs 
    var item = null;

    //dragstart event to initiate mouse dragging
    document.addEventListener('dragstart', function(e)
    {
        //set the item reference to this element
        item = e.target;
        
        //we don't need the transfer data, but we have to define something
        //otherwise the drop action won't work at all in firefox
        //most browsers support the proper mime-type syntax, eg. "text/plain"
        //but we have to use this incorrect syntax for the benefit of IE10+
        e.dataTransfer.setData('text', '');
    
    }, false);

    //dragover event to allow the drag by preventing its default
    //ie. the default action of an element is not to allow dragging 
    document.addEventListener('dragover', function(e)
    {
        if(item)
        {
            e.preventDefault();
        }
    
    }, false);  

    //drop event to allow the element to be dropped into valid targets
    document.addEventListener('drop', function(e)
    {
        //if this element is a drop target, move the item here 
        //then prevent default to allow the action (same as dragover)
        if(e.target.getAttribute('data-draggable') == 'target')
        {
            e.target.appendChild(item);
            
            e.preventDefault();
        }
    
    }, false);
    
    //dragend event to clean-up after drop or abort
    //which fires whether or not the drop target was valid
    document.addEventListener('dragend', function(e)
    {
        item = null;
    
    }, false);

})();   
</script>
</head>
<body>
<!-- Dropdown Structure -->
<ul id="dropdown1" class="dropdown-content">
 <li><a href="/players/1">AFC Bournemouth</a></li>
            <li><a href="/players/2">Arsenal</a></li>
            <li><a href="/players/3">Burnley</a></li>
            <li><a href="/players/4">Chelsea</a></li>
            <li><a href="/players/5">Crystal Palace</a></li>
            <li><a href="/players/6">Everton</a></li>
            <li><a href="/players/7">Hull City</a></li>
            <li><a href="/players/8">Leicester City</a></li>
            <li><a href="/players/9">Liverpool</a></li>
            <li><a href="/players/10">Manchester City</a></li>
            <li><a href="/players/11">Manchester United</a></li>
            <li><a href="/players/12">Middlesbrough</a></li>
            <li><a href="/players/13">Southampton</a></li>
            <li><a href="/players/14">Stoke City</a></li>
            <li><a href="/players/15">Sunderland</a></li>
            <li><a href="/players/16">Swansea City</a></li>
            <li><a href="/players/17">Tottenham Hotspur</a></li>
            <li><a href="/players/18">Watford</a></li>
            <li><a href="/players/19">West Bromwich Albion</a></li>
            <li><a href="/players/20">West Ham United</a></li>
</ul>

<ul id="dropdown2" class="dropdown-content">
 <li><%= link_to "Profile", '/edit_profile'%></li>
 <li><%= link_to "Log out", logout_path, method: "delete" %></li>
</ul>

<ul id="dropdown3" class="dropdown-content">
 <li><a href="/players/1">AFC Bournemouth</a></li>
            <li><a href="/players/2">Arsenal</a></li>
            <li><a href="/players/3">Burnley</a></li>
            <li><a href="/players/4">Chelsea</a></li>
            <li><a href="/players/5">Crystal Palace</a></li>
            <li><a href="/players/6">Everton</a></li>
            <li><a href="/players/7">Hull City</a></li>
            <li><a href="/players/8">Leicester City</a></li>
            <li><a href="/players/9">Liverpool</a></li>
            <li><a href="/players/10">Manchester City</a></li>
            <li><a href="/players/11">Manchester United</a></li>
            <li><a href="/players/12">Middlesbrough</a></li>
            <li><a href="/players/13">Southampton</a></li>
            <li><a href="/players/14">Stoke City</a></li>
            <li><a href="/players/15">Sunderland</a></li>
            <li><a href="/players/16">Swansea City</a></li>
            <li><a href="/players/17">Tottenham Hotspur</a></li>
            <li><a href="/players/18">Watford</a></li>
            <li><a href="/players/19">West Bromwich Albion</a></li>
            <li><a href="/players/20">West Ham United</a></li>
</ul>

<ul id="dropdown4" class="dropdown-content">
 <li><%= link_to "Profile", '/edit_profile'%></li>
 <li><%= link_to "Log out", logout_path, method: "delete" %></li>
</ul>

<ul id="dropdown5" class="dropdown-content">
 <li><%= link_to "Player Results", '/teamsheet/admin_edit'%></li>
 <li><%= link_to "Fixture Results", '/results/fixture_results' %></li>
 <li><%= link_to "Manage Permissions", '/manage_permissions' %></li>
 <li><a class="dropdown-button" href="#!" data-activates="dropdown3">Manage Clubs<i class="material-icons right">arrow_drop_down</i></a></li>
</ul>

<div class="container-fluid">
    <nav>
    <div class="nav-wrapper green lighten-2">
    &nbsp; &nbsp; 
      <a><%=link_to_if current_user.access == "admin", "UFFL", '/admin_index', class: "brand-logo" do
      link_to "UFFL", '/index', class: "brand-logo"
      end
      %></a>
      <a href="#!" data-activates="mobile-demo" class="button-collapse"><i class="material-icons">menu</i></a>
      <ul class="right hide-on-med-and-down">
          <div class="dropdown left">
    <button class="btn btn-primary dropdown-toggle" id="menu1" type="button" data-toggle="dropdown">Notifications
    </button>
    <ul class="dropdown-menu" role="menu" aria-labelledby="menu1">
      <% @notifications_all.each do |n| %>
      <% if n.show == "yes" %>
      <li role="presentation"><p id="rcorners1"><%= n.message %><br/><%= n.created_at %><br/></p></li>
      <% end %>
      <% end %>
      <a href="/notifications">Manage notifications</a>
    </ul>
  </div>
        <li><a href="#"><% if logged_in? -%><%= quid(current_user.budget) %><% end -%></a></li>
        <li><a class="dropdown-button" href="#!" data-activates="dropdown2"><% if logged_in? -%><%= current_user.first_name %><% end -%><i class="material-icons right">arrow_drop_down</i></a></li>
      </ul>
      <ul class="side-nav" id="mobile-demo">
       <li><a href="">Manage Permissions<span class="sr-only"></span></a></li>
       <li><a class="dropdown-button" href="#!" data-activates="dropdown3">Manage Clubs<i class="material-icons right">arrow_drop_down</i></a></li>
        <li><a href="/bids">Transfers<span class="sr-only"></span></a></li>
        <li><a href="/teamsheet/index">Pick Team<span class="sr-only"></span></a></li>
        <li><a href="/teamsheet/admin_edit">Player Results<span class="sr-only"></span></a></li>
        <li><a href="/results/fixture_results">Fixture Results<span class="sr-only"></span></a></li>
        <li><a href="/league_table/viewLeagueTable">League Table<span class="sr-only"></span></a></li>
        <li><a href="#"><% if logged_in? -%><%= quid(current_user.budget) %><% end -%></a></li>
        <li><a class="dropdown-button" href="#!" data-activates="dropdown4"><% if logged_in? -%><%= current_user.first_name %><% end -%><i class="material-icons right">arrow_drop_down</i></a></li>
      </ul>
    </div>
  </div>
  </nav>
 <% flash.each do |key, value| %>
  <%= content_tag :div, value, class: "alert alert-#{key}" %>
<% end %>
<div class="container-fluid">
<div class="row">
  <div class="col s6" style="background-color:white;">
    <h5 style="text-align:center;"> Your Squad </h5>
  <% @playerList.each do |p| %>
        <div class="col s6">
          <div class="card white darken-1">
            <div class="card-content black-text">
              <span class="card-title"><%= Player.where(:id => p.player_id).pluck(:name).to_s.tr('""','').tr('[]','') %> <br></header> </span>
              <p> 
      <%= Player.select(:position).where(:id => p.player_id).pluck(:position).to_s.tr('""','').tr('[]','')%> <br>
      <%= Team.select(:name).where(:id => Player.find(p.player_id).teams_id).pluck(:name).to_s.tr('""','').tr('[]','') %><br>
      Bid amount:
      <%= quid(p.amount) %> <br> 
      </p>
            </div>
            <div class="card-action">
      <% if canView? %>
      <%= link_to "Choose player", edit_teamsheet_path(p.id) %>
      <% end %>
            </div>
          </div>
        </div>
        <% end %>
      </div>
<div class="col s6" style="background-color:white;">
  <h5 style="text-align:center;"> Your Active Team</h5>
      <% @players.each do |p| %>
        <div class="col s6">
          <div class="card blue-grey darken-1">
            <div class="card-content white-text">
              <span class="card-title"><%= Player.where(:id => p.player_id).pluck(:name).to_s.tr('""','').tr('[]','') %> <br></header> </span>
              <p> 
      <%= Player.select(:position).where(:id => p.player_id).pluck(:position).to_s.tr('""','').tr('[]','')%> <br>
      <%= Team.select(:name).where(:id => Player.find(p.player_id).teams_id).pluck(:name).to_s.tr('""','').tr('[]','') %>
      </p>
            </div>
            <div class="card-action">
            </div>
          </div>
        </div>
        <% end %>
      </div>
    </div>
  </div>
</body>
</html>
